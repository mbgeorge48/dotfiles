#!/bin/sh

case $(ps -p $$ -ocomm=) in
*'zsh'*)
    source $HOME/.zsh_prompt
    source $HOME/.zsh_extras
    ;;
*'bash'*)
    source $HOME/.bash_prompt
    ;;
esac

# Brew
export CPPFLAGS=-I/usr/local/opt/openssl/include
export LDFLAGS=-L/usr/local/opt/openssl/lib

# GPG
export GPG_TTY=$(tty)

if [[ $PWD = $HOME/personal/* ]] || [[ $PWD = $HOME/work/* ]]; then
    if [ -e $HOME/.dotfiles/node/nvm ]; then
        source $HOME/.dotfiles/node/nvm
    fi

    if [ -e $HOME/.dotfiles/python/python ]; then
        command -v python3 >/dev/null 2>&1 && source $HOME/.dotfiles/python/python
        command -v python >/dev/null 2>&1 && source $HOME/.dotfiles/python/python
    fi

    brew list android-studio &>/dev/null
    if [ $? -eq 0 ]; then
        export ANDROID_HOME=$HOME/Library/Android/sdk
        export PATH=$ANDROID_HOME/platform-tools:$PATH
        export JAVA_HOME=/Applications/Android\ Studio.app/Contents/jbr/Contents/Home
    fi
fi

export VISUAL=vim
export EDITOR='$VISUAL'

cd_list_dir() {
    cd $1
    ls
}

# For seeing what model phone is connected when using usb debugging
# Run `abd devices` to get the arg required
function what_phone_model_is_this(){
    adb -s $1 shell getprop ro.product.model
}

alias set_nvm='source $HOME/.dotfiles/node/nvm'
alias set_python='source $HOME/.dotfiles/python/python'

alias ls='ls -FG'
alias ll='ls -ahl'
alias grep_history='history | grep'
alias current_branch='git rev-parse --abbrev-ref HEAD'
alias cdl='cd_list_dir'
alias echo_scp='echo $USER@$(hostname -s):$PWD'


if [ -e $HOME/.custom_aliases ]; then
    source ~/.custom_aliases
fi
